<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">

<!-- This HTML file generated by cxref. -->
<!-- cxref program (c) Andrew M. Bishop 1995,96,97,98,99. -->

<!--
Cxref: cxref -DTN_SRV -Id:/djgpp/include -O../doc/cxref -xref-all -Nsv2agw -index-all -html32 -html32-src agwsubs.c
CPP  : gcc -E -C -dD -dI -DTN_SRV -Id:/djgpp/include
-->

<HTML>

<HEAD>
<TITLE>Cross reference for agwsubs.c of sv2agw.</TITLE>
</HEAD>

<BODY>

<h1><a name="file" href="agwsubs.c.src.html">File agwsubs.c</a></h1>
<b>RCS Header: agwsubs.c 1.0 Sun 07-23-2000 10:08:34 pm </b>
<p>

AGW Packet Engine subroutines
These are devellopped under DJGPP environment
<p>
<table>
<tr><td>References Variables:
<td><a href="agwsubs.c.html#var-cmdbuffer">cmdbuffer</a><td><a href="agwsubs.c.html#var-cmdbuffer">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#var-databuffer">databuffer</a><td><a href="agwsubs.c.html#var-databuffer">agwsubs.c</a>
</table>

<hr>
<h2>Included Files</h2>

 Default include files 
<p>
<ul>
<li><tt>#include &lt;d:/djgpp/include/stdio.h&gt;</tt>
</ul>
<ul>
<li><tt>#include &lt;d:/djgpp/include/stdlib.h&gt;</tt>
</ul>
<ul>
<li><tt>#include &lt;d:/djgpp/include/strings.h&gt;</tt>
</ul>
<ul>
<li><tt>#include &lt;d:/djgpp/include/ctype.h&gt;</tt>
</ul>
 For kbhit(), which is not ANSI unfortunately 
<p>
<ul>
<li><tt>#include &lt;d:/djgpp/include/pc.h&gt;</tt>
</ul>
 For getch(), which is not ANSI unfortunately 
<p>
<ul>
<li><tt>#include &lt;d:/djgpp/include/conio.h&gt;</tt>
</ul>
 The AGWPE include files 
<p>
<ul>
<li><tt><a href="fortify.h.html#file">#include &quot;fortify.h&quot;</a></tt>
<ul>
<li><tt>#include &lt;stdlib.h&gt;</tt>
<li><tt>#include &lt;string.h&gt;</tt>
<li><tt><a href="ufortify.h.html#file">#include &quot;ufortify.h&quot;</a></tt>
</ul>
</ul>
<ul>
<li><tt><a href="ringbuf.h.html#file">#include &quot;ringbuf.h&quot;</a></tt>
<ul>
<li><tt>#include &lt;stdio.h&gt;</tt>
<li><tt>#include &lt;stdlib.h&gt;</tt>
</ul>
</ul>
<ul>
<li><tt><a href="agwhdr.h.html#file">#include &quot;agwhdr.h&quot;</a></tt>
</ul>
<ul>
<li><tt><a href="agwpe_if.h.html#file">#include &quot;agwpe_if.h&quot;</a></tt>
<ul>
<li><tt><a href="ringbuf.h.html#file">#include &quot;ringbuf.h&quot;</a></tt>
<li><tt><a href="agwhdr.h.html#file">#include &quot;agwhdr.h&quot;</a></tt>
</ul>
</ul>
<ul>
<li><tt><a href="agwsubs.h.html#file">#include &quot;agwsubs.h&quot;</a></tt>
<ul>
<li><tt><a href="agwhdr.h.html#file">#include &quot;agwhdr.h&quot;</a></tt>
</ul>
</ul>
<ul>
<li><tt><a href="tn_srv.h.html#file">#include &quot;tn_srv.h&quot;</a></tt>
<ul>
<li><tt><a href="ringbuf.h.html#file">#include &quot;ringbuf.h&quot;</a></tt>
</ul>
</ul>

<hr>
<h2>Preprocessor definitions</h2>

<tt><a href="agwsubs.c.src.html#line528">#define BUFSIZE</a> 256</tt><br>

<hr>
<h2><a name="var-agwpe_version">Global Variable agwpe_version</a></h2>
 String which will be filled with the AGWPE version 
<p>
<tt><a href="agwsubs.c.src.html#line26">char agwpe_version[20]</a></tt><br>
<table>
<tr><td>Visible in:
<td>&nbsp;<td><a href="agwsubs.c.html#file">agwsubs.c</a>
<tr><td>&nbsp;
<td>&nbsp;<td><a href="cmd.c.html#file">cmd.c</a>
<tr><td>&nbsp;
<td>&nbsp;<td><a href="test.c.html#file">test.c</a>
<tr><td>Used in:
<td><a href="agwsubs.c.html#func-agwpe_init">agwpe_init()</a><td><a href="agwsubs.c.html#func-agwpe_init">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="cmd.c.html#func-exec_cmd">exec_cmd()</a><td><a href="cmd.c.html#func-exec_cmd">cmd.c</a>
<tr><td>&nbsp;
<td><a href="test.c.html#func-main">main()</a><td><a href="test.c.html#func-main">test.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#func-store_version">store_version()</a><td><a href="agwsubs.c.html#func-store_version">agwsubs.c</a>

</table>

<hr>
<h2><a name="var-agwpe_portinfo">Global Variable agwpe_portinfo</a></h2>
 String which will be filled with AGWPE port information 
<p>
<tt><a href="agwsubs.c.src.html#line27">char agwpe_portinfo[264]</a></tt><br>
<table>
<tr><td>Visible in:
<td>&nbsp;<td><a href="agwsubs.c.html#file">agwsubs.c</a>
<tr><td>&nbsp;
<td>&nbsp;<td><a href="cmd.c.html#file">cmd.c</a>
<tr><td>&nbsp;
<td>&nbsp;<td><a href="test.c.html#file">test.c</a>
<tr><td>Used in:
<td><a href="agwsubs.c.html#func-agwpe_init">agwpe_init()</a><td><a href="agwsubs.c.html#func-agwpe_init">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#func-agwpe_process">agwpe_process()</a><td><a href="agwsubs.c.html#func-agwpe_process">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="cmd.c.html#func-exec_cmd">exec_cmd()</a><td><a href="cmd.c.html#func-exec_cmd">cmd.c</a>
<tr><td>&nbsp;
<td><a href="test.c.html#func-main">main()</a><td><a href="test.c.html#func-main">test.c</a>

</table>

<hr>
<h2><a name="var-agwpe_status">Global Variable agwpe_status</a></h2>
 Start status with everything off 
<p>
<tt><a href="agwsubs.c.src.html#line28">int agwpe_status</a></tt><br>
<table>
<tr><td>Visible in:
<td>&nbsp;<td><a href="agwpe_if.c.html#file">agwpe_if.c</a>
<tr><td>&nbsp;
<td>&nbsp;<td><a href="agwsubs.c.html#file">agwsubs.c</a>
<tr><td>&nbsp;
<td>&nbsp;<td><a href="cmd.c.html#file">cmd.c</a>
<tr><td>&nbsp;
<td>&nbsp;<td><a href="test.c.html#file">test.c</a>
<tr><td>&nbsp;
<td>&nbsp;<td><a href="tn_srv.c.html#file">tn_srv.c</a>
<tr><td>Used in:
<td><a href="agwpe_if.c.html#func-agw_tcp_send">agw_tcp_send()</a><td><a href="agwpe_if.c.html#func-agw_tcp_send">agwpe_if.c</a>
<tr><td>&nbsp;
<td><a href="agwpe_if.c.html#func-agwdata_get">agwdata_get()</a><td><a href="agwpe_if.c.html#func-agwdata_get">agwpe_if.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#func-agwpe_init">agwpe_init()</a><td><a href="agwsubs.c.html#func-agwpe_init">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#func-agwpe_process">agwpe_process()</a><td><a href="agwsubs.c.html#func-agwpe_process">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="tn_srv.c.html#func-check_conn_request">check_conn_request()</a><td><a href="tn_srv.c.html#func-check_conn_request">tn_srv.c</a>
<tr><td>&nbsp;
<td><a href="cmd.c.html#func-disp_prompt">disp_prompt()</a><td><a href="cmd.c.html#func-disp_prompt">cmd.c</a>
<tr><td>&nbsp;
<td><a href="cmd.c.html#func-exec_cmd">exec_cmd()</a><td><a href="cmd.c.html#func-exec_cmd">cmd.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#func-get_con_data">get_con_data()</a><td><a href="agwsubs.c.html#func-get_con_data">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="tn_srv.c.html#func-get_telnet_data">get_telnet_data()</a><td><a href="tn_srv.c.html#func-get_telnet_data">tn_srv.c</a>
<tr><td>&nbsp;
<td><a href="test.c.html#func-main">main()</a><td><a href="test.c.html#func-main">test.c</a>
<tr><td>&nbsp;
<td><a href="cmd.c.html#func-output">output()</a><td><a href="cmd.c.html#func-output">cmd.c</a>
<tr><td>&nbsp;
<td><a href="tn_srv.c.html#func-send_telnet_data">send_telnet_data()</a><td><a href="tn_srv.c.html#func-send_telnet_data">tn_srv.c</a>
<tr><td>&nbsp;
<td><a href="tn_srv.c.html#func-telnet_srv_init">telnet_srv_init()</a><td><a href="tn_srv.c.html#func-telnet_srv_init">tn_srv.c</a>
<tr><td>&nbsp;
<td><a href="tn_srv.c.html#func-tn_close">tn_close()</a><td><a href="tn_srv.c.html#func-tn_close">tn_srv.c</a>
<tr><td>&nbsp;
<td><a href="tn_srv.c.html#func-tn_close_all">tn_close_all()</a><td><a href="tn_srv.c.html#func-tn_close_all">tn_srv.c</a>
<tr><td>&nbsp;
<td><a href="tn_srv.c.html#func-tn_printf">tn_printf()</a><td><a href="tn_srv.c.html#func-tn_printf">tn_srv.c</a>

</table>

<hr>
<h2><a name="var-mycall">Global Variable mycall</a></h2>
 Strings to store mycall and tocall in. This is possible in this
    way as we only support one connection at a time   Space to store mycall in 
<p>
<tt><a href="agwsubs.c.src.html#line32">char mycall[16]</a></tt><br>
<table>
<tr><td>Visible in:
<td>&nbsp;<td><a href="agwsubs.c.html#file">agwsubs.c</a>
<tr><td>&nbsp;
<td>&nbsp;<td><a href="cmd.c.html#file">cmd.c</a>
<tr><td>&nbsp;
<td>&nbsp;<td><a href="test.c.html#file">test.c</a>
<tr><td>Used in:
<td><a href="agwsubs.c.html#func-agwpe_connect">agwpe_connect()</a><td><a href="agwsubs.c.html#func-agwpe_connect">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#func-agwpe_disconnect">agwpe_disconnect()</a><td><a href="agwsubs.c.html#func-agwpe_disconnect">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#func-agwpe_send_data">agwpe_send_data()</a><td><a href="agwsubs.c.html#func-agwpe_send_data">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="test.c.html#func-main">main()</a><td><a href="test.c.html#func-main">test.c</a>

</table>

<hr>
<h2><a name="var-tocall">Global Variable tocall</a></h2>
 Space to store other stations callsign in 
<p>
<tt><a href="agwsubs.c.src.html#line33">char tocall[16]</a></tt><br>
<table>
<tr><td>Visible in:
<td>&nbsp;<td><a href="agwsubs.c.html#file">agwsubs.c</a>
<tr><td>&nbsp;
<td>&nbsp;<td><a href="cmd.c.html#file">cmd.c</a>
<tr><td>&nbsp;
<td>&nbsp;<td><a href="test.c.html#file">test.c</a>
<tr><td>Used in:
<td><a href="cmd.c.html#func-exec_cmd">exec_cmd()</a><td><a href="cmd.c.html#func-exec_cmd">cmd.c</a>
<tr><td>&nbsp;
<td><a href="test.c.html#func-main">main()</a><td><a href="test.c.html#func-main">test.c</a>

</table>

<hr>
<h2>Local Variables</h2>

<b><a name="var-cmdbuffer">cmdbuffer</a></b><br>
 AGWPE header which will be used to send commands 
<p>
<tt><a href="agwsubs.c.src.html#line36">static AGWPE_HDR cmdbuffer</a></tt><br>
<table>
<tr><td>Used in:
<td>&nbsp;<td><a href="agwsubs.c.html#file">agwsubs.c</a>

</table>
<p>
<b><a name="var-cmd">cmd</a></b><br>
 A pointer to the AGWPE header defined above 
<p>
<tt><a href="agwsubs.c.src.html#line37">static AGWPE_HDR* cmd</a></tt><br>
<table>
<tr><td>Used in:
<td><a href="#func-agwpe_connect">agwpe_connect()</a>
<tr><td>&nbsp;
<td><a href="#func-agwpe_disconnect">agwpe_disconnect()</a>
<tr><td>&nbsp;
<td><a href="#func-agwpe_get_portinfo">agwpe_get_portinfo()</a>
<tr><td>&nbsp;
<td><a href="#func-agwpe_get_ver">agwpe_get_ver()</a>
<tr><td>&nbsp;
<td><a href="#func-agwpe_heard">agwpe_heard()</a>
<tr><td>&nbsp;
<td><a href="#func-agwpe_monitor">agwpe_monitor()</a>
<tr><td>&nbsp;
<td><a href="#func-agwpe_register">agwpe_register()</a>
<tr><td>&nbsp;
<td><a href="#func-agwpe_send_data">agwpe_send_data()</a>
<tr><td>&nbsp;
<td><a href="#func-agwpe_unregister">agwpe_unregister()</a>

</table>
<p>
<b><a name="var-databuffer">databuffer</a></b><br>
 Buffer to store incoming data in 
<p>
<tt><a href="agwsubs.c.src.html#line38">static unsigned char databuffer[4096]</a></tt><br>
<table>
<tr><td>Used in:
<td>&nbsp;<td><a href="agwsubs.c.html#file">agwsubs.c</a>

</table>
<p>
<b><a name="var-data">data</a></b><br>
 A pointer to the buffer, defined above 
<p>
<tt><a href="agwsubs.c.src.html#line39">static unsigned char* data</a></tt><br>
<table>
<tr><td>Used in:
<td><a href="#func-agwpe_process">agwpe_process()</a>

</table>
<p>
<b><a name="var-ringbuf">ringbuf</a></b><br>
 Ringbuffer to store incoming data  
<p>
<tt><a href="agwsubs.c.src.html#line40">static RINGBUF* ringbuf</a></tt><br>
<table>
<tr><td>Used in:
<td><a href="#func-agwpe_init">agwpe_init()</a>
<tr><td>&nbsp;
<td><a href="#func-agwpe_process">agwpe_process()</a>

</table>

<hr>
<h2><a name="func-agwhdr_get">Global Function agwhdr_get()</a></h2>
Description: Get AGWPE header out of the ringbuffer
Space for the header has to be allocated before calling this function.
<p>
<tt><a href="agwsubs.c.src.html#line487">int agwhdr_get ( RINGBUF* buf, AGWPE_HDR* hdr )</a></tt><br>
<dl compact>
<dt><tt>RINGBUF* buf</tt>
<dd> Pointer to ringbuffer to get data from 
<dt><tt>AGWPE_HDR* hdr</tt>
<dd> Pointer to header to store data in 
</dl>
Returns 1 on success, 0 if no header was available
<p>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="agwpe_if.h.html#file">agwpe_if.h</a>
<tr><td>Calls:
<td><a href="agwpe_if.c.html#func-agwhdr_available">agwhdr_available()</a><td><a href="agwpe_if.c.html#func-agwhdr_available">agwpe_if.c</a>
<tr><td>&nbsp;
<td><a href="ringbuf.c.html#func-ringbuf_cnt">ringbuf_cnt()</a><td><a href="ringbuf.c.html#func-ringbuf_cnt">ringbuf.c</a>
<tr><td>&nbsp;
<td><a href="ringbuf.c.html#func-ringbuf_get">ringbuf_get()</a><td><a href="ringbuf.c.html#func-ringbuf_get">ringbuf.c</a>
<tr><td>&nbsp;
<td colspan=2>exit(), perror()
<tr><td>Called by:
<td><a href="agwsubs.c.html#func-agwpe_process">agwpe_process()</a><td><a href="agwsubs.c.html#func-agwpe_process">agwsubs.c</a>

</table>

<hr>
<h2><a name="func-agwpe_connect">Global Function agwpe_connect()</a></h2>
Start a connection to another station
<p>
<tt><a href="agwsubs.c.src.html#line212">int agwpe_connect ( int port, char* callsign )</a></tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="agwsubs.h.html#file">agwsubs.h</a>
<tr><td>Calls:
<td><a href="agwpe_if.c.html#func-agw_tcp_send">agw_tcp_send()</a><td><a href="agwpe_if.c.html#func-agw_tcp_send">agwpe_if.c</a>
<tr><td>&nbsp;
<td colspan=2>memset(), printf(), strcpy()
<tr><td>Called by:
<td><a href="cmd.c.html#func-exec_cmd">exec_cmd()</a><td><a href="cmd.c.html#func-exec_cmd">cmd.c</a>
<tr><td>References Variables:
<td><a href="agwsubs.c.html#var-cmd">cmd</a><td><a href="agwsubs.c.html#var-cmd">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#var-mycall">mycall</a><td><a href="agwsubs.c.html#var-mycall">agwsubs.c</a>

</table>

<hr>
<h2><a name="func-agwpe_datalen">Global Function agwpe_datalen()</a></h2>
Return the length of the data, as indicated in the AGWPE header like
1:Fm PA3BTL-1 To BEACON &lt;UI pid=F0 Len=64 &gt;[10:34:24]
will return 64
<p>
<tt><a href="agwsubs.c.src.html#line336">int agwpe_datalen ( unsigned char* data )</a></tt><br>
<dl compact>
<dt><tt>unsigned char* data</tt>
<dd> Pointer to incoming message 
</dl>
Returns length of the following data
If the string &quot;Len=&quot; is not found, function will return 0.
<p>
<table>
<tr><td>Calls:
<td colspan=2>atoi(), strstr()
<tr><td>Called by:
<td><a href="agwsubs.c.html#func-agwpe_process">agwpe_process()</a><td><a href="agwsubs.c.html#func-agwpe_process">agwsubs.c</a>

</table>

<hr>
<h2><a name="func-agwpe_disconnect">Global Function agwpe_disconnect()</a></h2>
Disconnect station
<p>
<tt><a href="agwsubs.c.src.html#line229">int agwpe_disconnect ( int port, char* callsign )</a></tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="agwsubs.h.html#file">agwsubs.h</a>
<tr><td>Calls:
<td><a href="agwpe_if.c.html#func-agw_tcp_send">agw_tcp_send()</a><td><a href="agwpe_if.c.html#func-agw_tcp_send">agwpe_if.c</a>
<tr><td>&nbsp;
<td colspan=2>memset(), printf(), strcpy()
<tr><td>Called by:
<td><a href="cmd.c.html#func-exec_cmd">exec_cmd()</a><td><a href="cmd.c.html#func-exec_cmd">cmd.c</a>
<tr><td>References Variables:
<td><a href="agwsubs.c.html#var-cmd">cmd</a><td><a href="agwsubs.c.html#var-cmd">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#var-mycall">mycall</a><td><a href="agwsubs.c.html#var-mycall">agwsubs.c</a>

</table>

<hr>
<h2><a name="func-agwpe_get_ver">Global Function agwpe_get_ver()</a></h2>
Inquire AGWPE for version number. The version number will
be stored by agw_process in the global string agwpe_version.
<p>
<tt><a href="agwsubs.c.src.html#line140">void agwpe_get_ver ( void )</a></tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="agwsubs.h.html#file">agwsubs.h</a>
<tr><td>Calls:
<td><a href="agwpe_if.c.html#func-agw_tcp_send">agw_tcp_send()</a><td><a href="agwpe_if.c.html#func-agw_tcp_send">agwpe_if.c</a>
<tr><td>&nbsp;
<td colspan=2>memset()
<tr><td>Called by:
<td><a href="agwsubs.c.html#func-agwpe_init">agwpe_init()</a><td><a href="agwsubs.c.html#func-agwpe_init">agwsubs.c</a>
<tr><td>References Variables:
<td><a href="agwsubs.c.html#var-cmd">cmd</a><td><a href="agwsubs.c.html#var-cmd">agwsubs.c</a>

</table>

<hr>
<h2><a name="func-agwpe_heard">Global Function agwpe_heard()</a></h2>
Ask for list of heard stations
<p>
<tt><a href="agwsubs.c.src.html#line246">int agwpe_heard ( int port )</a></tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="agwsubs.h.html#file">agwsubs.h</a>
<tr><td>Calls:
<td><a href="agwpe_if.c.html#func-agw_tcp_send">agw_tcp_send()</a><td><a href="agwpe_if.c.html#func-agw_tcp_send">agwpe_if.c</a>
<tr><td>&nbsp;
<td colspan=2>memset()
<tr><td>Called by:
<td><a href="cmd.c.html#func-exec_cmd">exec_cmd()</a><td><a href="cmd.c.html#func-exec_cmd">cmd.c</a>
<tr><td>References Variables:
<td><a href="agwsubs.c.html#var-cmd">cmd</a><td><a href="agwsubs.c.html#var-cmd">agwsubs.c</a>

</table>

<hr>
<h2><a name="func-agwpe_init">Global Function agwpe_init()</a></h2>
Initialize the AGWPE interface by 
setting up tcpip interface,
allocating a ringbuffer for incoming data
get version number and port information of the AGWPE
<p>
<tt><a href="agwsubs.c.src.html#line58">int agwpe_init ( char* address, char* portnr )</a></tt><br>
<dl compact>
<dt><tt>int agwpe_init</tt>
<dd> returns 1 for success, 0 on failure 
<dt><tt>char* address</tt>
<dd> Host name or IP address to use 
<dt><tt>char* portnr</tt>
<dd> Port number to use 
</dl>
Returns always 1 for success
<p>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="agwsubs.h.html#file">agwsubs.h</a>
<tr><td>Calls:
<td><a href="agwpe_if.c.html#func-agw_tcp_init">agw_tcp_init()</a><td><a href="agwpe_if.c.html#func-agw_tcp_init">agwpe_if.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#func-agwpe_get_portinfo">agwpe_get_portinfo()</a><td><a href="agwsubs.c.html#func-agwpe_get_portinfo">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#func-agwpe_get_ver">agwpe_get_ver()</a><td><a href="agwsubs.c.html#func-agwpe_get_ver">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#func-agwpe_process">agwpe_process()</a><td><a href="agwsubs.c.html#func-agwpe_process">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="ringbuf.c.html#func-ringbuf_create">ringbuf_create()</a><td><a href="ringbuf.c.html#func-ringbuf_create">ringbuf.c</a>
<tr><td>&nbsp;
<td colspan=2>atexit()
<tr><td>Called by:
<td><a href="test.c.html#func-main">main()</a><td><a href="test.c.html#func-main">test.c</a>
<tr><td>References Functions:
<td><a href="agwpe_if.c.html#func-agw_tcp_close">agw_tcp_close()</a><td><a href="agwpe_if.c.html#func-agw_tcp_close">agwpe_if.c</a>
<tr><td>References Variables:
<td><a href="agwsubs.c.html#var-agwpe_portinfo">agwpe_portinfo</a><td><a href="agwsubs.c.html#var-agwpe_portinfo">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#var-agwpe_status">agwpe_status</a><td><a href="agwsubs.c.html#var-agwpe_status">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#var-agwpe_version">agwpe_version</a><td><a href="agwsubs.c.html#var-agwpe_version">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#var-ringbuf">ringbuf</a><td><a href="agwsubs.c.html#var-ringbuf">agwsubs.c</a>

</table>

<hr>
<h2><a name="func-agwpe_monitor">Global Function agwpe_monitor()</a></h2>
Enables the monitor function. There will be no confirmation,
but all incoming 'S','U'and 'I' frames will be send to the application.
<p>
<tt><a href="agwsubs.c.src.html#line199">int agwpe_monitor ( void )</a></tt><br>
<dl compact>
<dt><tt>int agwpe_monitor</tt>
<dd> Always returns 1 on success 
</dl>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="agwsubs.h.html#file">agwsubs.h</a>
<tr><td>Calls:
<td><a href="agwpe_if.c.html#func-agw_tcp_send">agw_tcp_send()</a><td><a href="agwpe_if.c.html#func-agw_tcp_send">agwpe_if.c</a>
<tr><td>&nbsp;
<td colspan=2>memset()
<tr><td>References Variables:
<td><a href="agwsubs.c.html#var-cmd">cmd</a><td><a href="agwsubs.c.html#var-cmd">agwsubs.c</a>

</table>

<hr>
<h2><a name="func-agwpe_printdata">Global Function agwpe_printdata()</a></h2>
Print data=r part of an received S,U,I or T frame
by determining were the CR is, and the print everything
after this, terminated with a '\n'
<p>
<tt><a href="agwsubs.c.src.html#line298">void agwpe_printdata ( unsigned char* p, int len )</a></tt><br>
<dl compact>
<dt><tt>unsigned char* p</tt>
<dd> Pointer to data to print 
<dt><tt>int len</tt>
<dd> Number of databytes to print 
</dl>
<table>
<tr><td>Calls:
<td colspan=2>printf()
<tr><td>Called by:
<td><a href="agwsubs.c.html#func-agwpe_process">agwpe_process()</a><td><a href="agwsubs.c.html#func-agwpe_process">agwsubs.c</a>

</table>

<hr>
<h2><a name="func-agwpe_printhdr">Global Function agwpe_printhdr()</a></h2>
Print header part of an received S,U,I or T frame
by determining were the CR is, and the print everything
in front of this as a regular string, terminated with a '\n'
<p>
<tt><a href="agwsubs.c.src.html#line281">void agwpe_printhdr ( unsigned char* data )</a></tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="agwsubs.h.html#file">agwsubs.h</a>
<tr><td>Calls:
<td colspan=2>printf()
<tr><td>Called by:
<td><a href="agwsubs.c.html#func-agwpe_process">agwpe_process()</a><td><a href="agwsubs.c.html#func-agwpe_process">agwsubs.c</a>

</table>

<hr>
<h2><a name="func-agwpe_process">Global Function agwpe_process()</a></h2>
Process all incoming data from AGWPE
<p>
<tt><a href="agwsubs.c.src.html#line356">void agwpe_process ( void )</a></tt><br>
 Incoming AGWPE header 
<br>
 Pointer to header defined above 
<br>
 Number of databytes which will follow the header 
<p>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="agwsubs.h.html#file">agwsubs.h</a>
<tr><td>Calls:
<td><a href="agwpe_if.c.html#func-agwdata_get">agwdata_get()</a><td><a href="agwpe_if.c.html#func-agwdata_get">agwpe_if.c</a>
<tr><td>&nbsp;
<td><a href="agwpe_if.c.html#func-agwhdr_available">agwhdr_available()</a><td><a href="agwpe_if.c.html#func-agwhdr_available">agwpe_if.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#func-agwhdr_cnt">agwhdr_cnt()</a><td><a href="agwsubs.c.html#func-agwhdr_cnt">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#func-agwhdr_get">agwhdr_get()</a><td><a href="agwsubs.c.html#func-agwhdr_get">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#func-agwhdr_type">agwhdr_type()</a><td><a href="agwsubs.c.html#func-agwhdr_type">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#func-agwpe_datalen">agwpe_datalen()</a><td><a href="agwsubs.c.html#func-agwpe_datalen">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#func-agwpe_printdata">agwpe_printdata()</a><td><a href="agwsubs.c.html#func-agwpe_printdata">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#func-agwpe_printhdr">agwpe_printhdr()</a><td><a href="agwsubs.c.html#func-agwpe_printhdr">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="agwpe_if.c.html#func-get_tcp_data">get_tcp_data()</a><td><a href="agwpe_if.c.html#func-get_tcp_data">agwpe_if.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#func-store_version">store_version()</a><td><a href="agwsubs.c.html#func-store_version">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="tn_srv.c.html#func-tn_printf">tn_printf()</a><td><a href="tn_srv.c.html#func-tn_printf">tn_srv.c</a>
<tr><td>&nbsp;
<td colspan=2>memcpy(), memset(), printf(), strcpy()
<tr><td>Called by:
<td><a href="agwsubs.c.html#func-agwpe_init">agwpe_init()</a><td><a href="agwsubs.c.html#func-agwpe_init">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="test.c.html#func-main">main()</a><td><a href="test.c.html#func-main">test.c</a>
<tr><td>References Variables:
<td><a href="agwsubs.c.html#var-agwpe_portinfo">agwpe_portinfo</a><td><a href="agwsubs.c.html#var-agwpe_portinfo">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#var-agwpe_status">agwpe_status</a><td><a href="agwsubs.c.html#var-agwpe_status">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#var-data">data</a><td><a href="agwsubs.c.html#var-data">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#var-ringbuf">ringbuf</a><td><a href="agwsubs.c.html#var-ringbuf">agwsubs.c</a>

</table>

<hr>
<h2><a name="func-agwpe_register">Global Function agwpe_register()</a></h2>
Register a callsign at AGWPE
<p>
<tt><a href="agwsubs.c.src.html#line166">int agwpe_register ( char* callsign )</a></tt><br>
<dl compact>
<dt><tt>char* callsign</tt>
<dd> Callsign to register 
</dl>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="agwsubs.h.html#file">agwsubs.h</a>
<tr><td>Calls:
<td><a href="agwpe_if.c.html#func-agw_tcp_send">agw_tcp_send()</a><td><a href="agwpe_if.c.html#func-agw_tcp_send">agwpe_if.c</a>
<tr><td>&nbsp;
<td colspan=2>memset(), strcpy()
<tr><td>Called by:
<td><a href="test.c.html#func-main">main()</a><td><a href="test.c.html#func-main">test.c</a>
<tr><td>References Variables:
<td><a href="agwsubs.c.html#var-cmd">cmd</a><td><a href="agwsubs.c.html#var-cmd">agwsubs.c</a>

</table>

<hr>
<h2><a name="func-agwpe_send_data">Global Function agwpe_send_data()</a></h2>
Send data over the connection to another station
<p>
<tt><a href="agwsubs.c.src.html#line259">int agwpe_send_data ( int port, char* callsign, char* data )</a></tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="agwsubs.h.html#file">agwsubs.h</a>
<tr><td>Calls:
<td><a href="agwpe_if.c.html#func-agw_tcp_send">agw_tcp_send()</a><td><a href="agwpe_if.c.html#func-agw_tcp_send">agwpe_if.c</a>
<tr><td>&nbsp;
<td colspan=2>memset(), strcpy(), strlen()
<tr><td>Called by:
<td><a href="test.c.html#func-main">main()</a><td><a href="test.c.html#func-main">test.c</a>
<tr><td>References Variables:
<td><a href="agwsubs.c.html#var-cmd">cmd</a><td><a href="agwsubs.c.html#var-cmd">agwsubs.c</a>
<tr><td>&nbsp;
<td><a href="agwsubs.c.html#var-mycall">mycall</a><td><a href="agwsubs.c.html#var-mycall">agwsubs.c</a>

</table>

<hr>
<h2><a name="func-agwpe_unregister">Global Function agwpe_unregister()</a></h2>
Unregister the given callsign from AGWPE
<p>
<tt><a href="agwsubs.c.src.html#line184">int agwpe_unregister ( char* callsign )</a></tt><br>
<dl compact>
<dt><tt>char* callsign</tt>
<dd> Callsign to unregister 
</dl>
Returns always 1 for success
<p>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="agwsubs.h.html#file">agwsubs.h</a>
<tr><td>Calls:
<td><a href="agwpe_if.c.html#func-agw_tcp_send">agw_tcp_send()</a><td><a href="agwpe_if.c.html#func-agw_tcp_send">agwpe_if.c</a>
<tr><td>&nbsp;
<td colspan=2>memset(), strcpy()
<tr><td>Called by:
<td><a href="test.c.html#func-main">main()</a><td><a href="test.c.html#func-main">test.c</a>
<tr><td>References Variables:
<td><a href="agwsubs.c.html#var-cmd">cmd</a><td><a href="agwsubs.c.html#var-cmd">agwsubs.c</a>

</table>

<hr>
<h2><a name="func-get_con_data">Global Function get_con_data()</a></h2>
Description: Get data from the console, and handle it as if it
came from the telnet client.
<p>
<tt><a href="agwsubs.c.src.html#line524">int get_con_data ( RINGBUF* ringbuf )</a></tt><br>
<dl compact>
<dt><tt>int get_con_data</tt>
<dd> Returns number of bytes received (&gt;=0) 
<dt><tt>RINGBUF* ringbuf</tt>
<dd> Pointer to ringbuf 
</dl>
 This is a static size for now 
<p>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="tn_srv.h.html#file">tn_srv.h</a>
<tr><td>Calls:
<td><a href="ringbuf.c.html#func-ringbuf_put">ringbuf_put()</a><td><a href="ringbuf.c.html#func-ringbuf_put">ringbuf.c</a>
<tr><td>&nbsp;
<td><a href="tn_srv.c.html#func-tn_printf">tn_printf()</a><td><a href="tn_srv.c.html#func-tn_printf">tn_srv.c</a>
<tr><td>&nbsp;
<td colspan=2>_conio_kbhit(), getch(), printf()
<tr><td>Called by:
<td><a href="test.c.html#func-main">main()</a><td><a href="test.c.html#func-main">test.c</a>
<tr><td>References Variables:
<td><a href="agwsubs.c.html#var-agwpe_status">agwpe_status</a><td><a href="agwsubs.c.html#var-agwpe_status">agwsubs.c</a>

</table>

<hr>
<h2><a name="func-agwhdr_cnt">Local Function agwhdr_cnt()</a></h2>
Get the number which is stored in the AGWPE header as the number
bytes which will follow the header
<p>
<tt><a href="agwsubs.c.src.html#line99">static unsigned long agwhdr_cnt ( AGWPE_HDR* hdr )</a></tt><br>
<dl compact>
<dt><tt>unsigned long agwhdr_cnt</tt>
<dd> Returns the number of bytes indicated by the header 
<dt><tt>AGWPE_HDR* hdr</tt>
<dd> Pointer to AGWPE header 
</dl>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="agwsubs.c.html#file">agwsubs.c</a>
<tr><td>Called by:
<td><a href="agwsubs.c.html#func-agwpe_process">agwpe_process()</a><td><a href="agwsubs.c.html#func-agwpe_process">agwsubs.c</a>

</table>

<hr>
<h2><a name="func-agwhdr_type">Local Function agwhdr_type()</a></h2>
This function will return the header type (datakind)
<p>
<tt><a href="agwsubs.c.src.html#line109">static char agwhdr_type ( AGWPE_HDR* hdr )</a></tt><br>
<dl compact>
<dt><tt>char agwhdr_type</tt>
<dd> Returns the 'datakind' indicated by the header 
<dt><tt>AGWPE_HDR* hdr</tt>
<dd> Pointer to AGWPE header 
</dl>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="agwsubs.c.html#file">agwsubs.c</a>
<tr><td>Called by:
<td><a href="agwsubs.c.html#func-agwpe_process">agwpe_process()</a><td><a href="agwsubs.c.html#func-agwpe_process">agwsubs.c</a>

</table>

<hr>
<h2><a name="func-agwpe_get_portinfo">Local Function agwpe_get_portinfo()</a></h2>
Request AGWPE port information. agw_process will store
it in the global string agwpe_portinfo;
<p>
<tt><a href="agwsubs.c.src.html#line154">static void agwpe_get_portinfo ( void )</a></tt><br>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="agwsubs.c.html#file">agwsubs.c</a>
<tr><td>Calls:
<td><a href="agwpe_if.c.html#func-agw_tcp_send">agw_tcp_send()</a><td><a href="agwpe_if.c.html#func-agw_tcp_send">agwpe_if.c</a>
<tr><td>&nbsp;
<td colspan=2>memset()
<tr><td>Called by:
<td><a href="agwsubs.c.html#func-agwpe_init">agwpe_init()</a><td><a href="agwsubs.c.html#func-agwpe_init">agwsubs.c</a>
<tr><td>References Variables:
<td><a href="agwsubs.c.html#var-cmd">cmd</a><td><a href="agwsubs.c.html#var-cmd">agwsubs.c</a>

</table>

<hr>
<h2><a name="func-store_version">Local Function store_version()</a></h2>
This function will calculate the AGWPE version and store
it in the global string
<p>
<tt><a href="agwsubs.c.src.html#line120">static int store_version ( unsigned char* d )</a></tt><br>
<dl compact>
<dt><tt>int store_version</tt>
<dd> Returns 1 for success, 0 on failure 
<dt><tt>unsigned char* d</tt>
<dd> Pointer to buffer, containing the data  
</dl>
<table>
<tr><td>Prototyped in:
<td colspan=2><a href="agwsubs.c.html#file">agwsubs.c</a>
<tr><td>Calls:
<td colspan=2>sprintf()
<tr><td>Called by:
<td><a href="agwsubs.c.html#func-agwpe_process">agwpe_process()</a><td><a href="agwsubs.c.html#func-agwpe_process">agwsubs.c</a>
<tr><td>References Variables:
<td><a href="agwsubs.c.html#var-agwpe_version">agwpe_version</a><td><a href="agwsubs.c.html#var-agwpe_version">agwsubs.c</a>

</table>

</BODY>
</HTML>
